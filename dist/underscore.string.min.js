!function(e,r){"use strict";function t(e){return null==e?"":""+e}function n(e,r){var t,n,i=e.toLowerCase();for(r=[].concat(r),t=0;t<r.length;t+=1)if(n=r[t]){if(n.test&&n.test(e))return!0;if(n.toLowerCase()===i)return!0}}function i(e){return 0>e?0:+e||0}var u=r.prototype.trim,o=r.prototype.trimRight,a=r.prototype.trimLeft,c=function(e){return 1*e||0},s=function(e,r){if(1>r)return"";for(var t="";r>0;)1&r&&(t+=e),r>>=1,e+=e;return t},l=[].slice,f=Object.prototype.toString,p=function(e){return null==e?"\\s":e.source?e.source:"["+x.escapeRegExp(e)+"]"},h={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},g={};for(var d in h)g[h[d]]=d;g["'"]="#39";var m=function(){function e(e){return f.call(e).slice(8,-1).toLowerCase()}var t=s,n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,i){var u,o,a,c,s,l,f,p=1,h=n.length,g="",d=[];for(o=0;h>o;o++)if(g=e(n[o]),"string"===g)d.push(n[o]);else if("array"===g){if(c=n[o],c[2])for(u=i[p],a=0;a<c[2].length;a++){if(!u.hasOwnProperty(c[2][a]))throw new Error(m('[_.sprintf] property "%s" does not exist',c[2][a]));u=u[c[2][a]]}else u=c[1]?i[c[1]]:i[p++];if(/[^s]/.test(c[8])&&"number"!=e(u))throw new Error(m("[_.sprintf] expecting number but found %s",e(u)));switch(c[8]){case"b":u=u.toString(2);break;case"c":u=r.fromCharCode(u);break;case"d":u=parseInt(u,10);break;case"e":u=c[7]?u.toExponential(c[7]):u.toExponential();break;case"f":u=c[7]?parseFloat(u).toFixed(c[7]):parseFloat(u);break;case"o":u=u.toString(8);break;case"s":u=(u=r(u))&&c[7]?u.substring(0,c[7]):u;break;case"u":u=Math.abs(u);break;case"x":u=u.toString(16);break;case"X":u=u.toString(16).toUpperCase()}u=/[def]/.test(c[8])&&c[3]&&u>=0?"+"+u:u,l=c[4]?"0"==c[4]?"0":c[4].charAt(1):" ",f=c[6]-r(u).length,s=c[6]?t(l,f):"",d.push(c[5]?u+s:s+u)}return d.join("")},n.cache={},n.parse=function(e){for(var r=e,t=[],n=[],i=0;r;){if(null!==(t=/^[^\x25]+/.exec(r)))n.push(t[0]);else if(null!==(t=/^\x25{2}/.exec(r)))n.push("%");else{if(null===(t=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(r)))throw new Error("[_.sprintf] huh?");if(t[2]){i|=1;var u=[],o=t[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(o)))throw new Error("[_.sprintf] huh?");for(u.push(a[1]);""!==(o=o.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(o)))u.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(o)))throw new Error("[_.sprintf] huh?");u.push(a[1])}t[2]=u}else i|=2;if(3===i)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");n.push(t)}r=r.substring(t[0].length)}return n},n}(),x={VERSION:"2.4.0",isBlank:function(e){return/^\s*$/.test(t(e))},stripTags:function(e){return t(e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){return e=t(e),e.charAt(0).toUpperCase()+e.slice(1)},decapitalize:function(e){return e=t(e),e.charAt(0).toLowerCase()+e.slice(1)},chop:function(e,t){return null==e?[]:(e=r(e),t=~~t,t>0?e.match(new RegExp(".{1,"+t+"}","g")):[e])},clean:function(e){return x.strip(e).replace(/\s+/g," ")},count:function(e,r){e=t(e),r=t(r);for(var n=0,i=0,u=r.length;;){if(i=e.indexOf(r,i),-1===i)break;n++,i+=u}return n},chars:function(e){return t(e).split("")},swapCase:function(e){return t(e).replace(/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})},escapeHTML:function(e){return t(e).replace(/[&<>"']/g,function(e){return"&"+g[e]+";"})},unescapeHTML:function(e){return t(e).replace(/\&([^;]+);/g,function(e,t){var n;return t in h?h[t]:(n=t.match(/^#x([\da-fA-F]+)$/))?r.fromCharCode(parseInt(n[1],16)):(n=t.match(/^#(\d+)$/))?r.fromCharCode(~~n[1]):e})},escapeRegExp:function(e){return t(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(e,r,t,n){var i=x.chars(e);return i.splice(~~r,~~t,n),i.join("")},insert:function(e,r,t){return x.splice(e,r,0,t)},include:function(e,r){return""===r?!0:-1!==t(e).indexOf(r)},join:function(){var e=l.call(arguments),r=e.shift();return e.join(t(r))},lines:function(e){return null==e?[]:r(e).split("\n")},reverse:function(e){return x.chars(e).reverse().join("")},startsWith:function(e,r,n){return e=t(e),r=""+r,n=null==n?0:Math.min(i(n),e.length),e.lastIndexOf(r)==n},endsWith:function(e,r,n){return e=t(e),r=""+r,n="undefined"==typeof n?e.length-r.length:Math.min(i(n),e.length)-r.length,n>=0&&e.indexOf(r,n)===n},succ:function(e){return e=t(e),e.slice(0,-1)+r.fromCharCode(e.charCodeAt(e.length-1)+1)},titleize:function(e){return t(e).toLowerCase().replace(/(?:^|\s|-)\S/g,function(e){return e.toUpperCase()})},camelize:function(e){return x.trim(e).replace(/[-_\s]+(.)?/g,function(e,r){return r?r.toUpperCase():""})},underscored:function(e){return x.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return x.trim(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(e){return x.capitalize(x.camelize(r(e).replace(/[\W_]/g," ")).replace(/\s/g,""))},humanize:function(e){return x.capitalize(x.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,r){return e=t(e),!r&&u?u.call(e):(r=p(r),e.replace(new RegExp("^"+r+"+|"+r+"+$","g"),""))},ltrim:function(e,r){return e=t(e),!r&&a?a.call(e):(r=p(r),e.replace(new RegExp("^"+r+"+"),""))},rtrim:function(e,r){return e=t(e),!r&&o?o.call(e):(r=p(r),e.replace(new RegExp(r+"+$"),""))},truncate:function(e,r,n){return e=t(e),n=n||"...",r=~~r,e.length>r?e.slice(0,r)+n:e},prune:function(e,n,i){if(e=t(e),n=~~n,i=null!=i?r(i):"...",e.length<=n)return e;var u=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},o=e.slice(0,n+1).replace(/.(?=\W*\w*$)/g,u);return o=o.slice(o.length-2).match(/\w\w/)?o.replace(/\s*\S+$/,""):x.rtrim(o.slice(0,o.length-1)),(o+i).length>e.length?e:e.slice(0,o.length)+i},words:function(e,r){return x.isBlank(e)?[]:x.trim(e,r).split(r||/\s+/)},pad:function(e,r,n,i){e=t(e),r=~~r;var u=0;switch(n?n.length>1&&(n=n.charAt(0)):n=" ",i){case"right":return u=r-e.length,e+s(n,u);case"both":return u=r-e.length,s(n,Math.ceil(u/2))+e+s(n,Math.floor(u/2));default:return u=r-e.length,s(n,u)+e}},lpad:function(e,r,t){return x.pad(e,r,t)},rpad:function(e,r,t){return x.pad(e,r,t,"right")},lrpad:function(e,r,t){return x.pad(e,r,t,"both")},sprintf:m,vsprintf:function(e,r){return r.unshift(e),m.apply(null,r)},toNumber:function(e,r){return e?(e=x.trim(e),e.match(/^-?\d+(?:\.\d+)?$/)?c(c(e).toFixed(~~r)):0/0):0},numberFormat:function(e,r,t,n){if(isNaN(e)||null==e)return"";e=e.toFixed(~~r),n="string"==typeof n?n:",";var i=e.split("."),u=i[0],o=i[1]?(t||".")+i[1]:"";return u.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+n)+o},strRight:function(e,r){e=t(e),r=t(r);var n=r?e.indexOf(r):-1;return~n?e.slice(n+r.length,e.length):e},strRightBack:function(e,r){e=t(e),r=t(r);var n=r?e.lastIndexOf(r):-1;return~n?e.slice(n+r.length,e.length):e},strLeft:function(e,r){e=t(e),r=t(r);var n=r?e.indexOf(r):-1;return~n?e.slice(0,n):e},strLeftBack:function(e,r){e=t(e),r=t(r);var n=e.lastIndexOf(r);return~n?e.slice(0,n):e},toSentence:function(e,r,t,n){r=r||", ",t=t||" and ";var i=e.slice(),u=i.pop();return e.length>2&&n&&(t=x.rtrim(r)+t),i.length?i.join(r)+t+u:u},toSentenceSerial:function(e,r,t){return x.toSentence(e,r,t,!0)},slugify:function(e){var r="ąàáäâãåæăćčĉęèéëêĝĥìíïîĵłľńňòóöőôõðøśșšŝťțŭùúüűûñÿýçżźž",n="aaaaaaaaaccceeeeeghiiiijllnnoooooooossssttuuuuuunyyczzz",i=new RegExp(p(r),"g");return e=t(e).toLowerCase().replace(i,function(e){var t=r.indexOf(e);return n.charAt(t)||"-"}),x.trim(x.dasherize(e.replace(/[^\w\s-]/g,"-")),"-")},surround:function(e,r){return[r,e,r].join("")},quote:function(e,r){return x.surround(e,r||'"')},unquote:function(e,r){return r=r||'"',e[0]===r&&e[e.length-1]===r?e.slice(1,e.length-1):e},exports:function(){var e={};for(var r in this)this.hasOwnProperty(r)&&!r.match(/^(?:include|contains|reverse)$/)&&(e[r]=this[r]);return e},repeat:function(e,r,n){if(e=t(e),r=~~r,null==n)return s(e,r);for(var i=[];r>0;i[--r]=e);return i.join(n)},naturalCmp:function(e,t){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var n=/(\.\d+)|(\d+)|(\D+)/g,i=r(e).match(n),u=r(t).match(n),o=Math.min(i.length,u.length),a=0;o>a;a++){var c=i[a],s=u[a];if(c!==s){var l=+c,f=+s;return l===l&&f===f?l>f?1:-1:s>c?-1:1}}return i.length!=u.length?i.length-u.length:t>e?-1:1},levenshtein:function(e,r){e=t(e),r=t(r);for(var n,i,u=[],o=0;o<=r.length;o++)for(var a=0;a<=e.length;a++)i=o&&a?e.charAt(a-1)===r.charAt(o-1)?n:Math.min(u[a],u[a-1],n)+1:o+a,n=u[a],u[a]=i;return u.pop()},toBoolean:function(e,r,t){return"number"==typeof e&&(e=""+e),"string"!=typeof e?!!e:(e=x.trim(e),n(e,r||["true","1"])?!0:n(e,t||["false","0"])?!1:void 0)},pluralForm:function(e,r,t,n){e=Math.abs(e)%100;var i=e%10;return e>10&&20>e?n:i>1&&5>i?t:1==i?r:n}};x.strip=x.trim,x.lstrip=x.ltrim,x.rstrip=x.rtrim,x.center=x.lrpad,x.rjust=x.lpad,x.ljust=x.rpad,x.contains=x.include,x.q=x.quote,x.toBool=x.toBoolean,"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(module.exports=x),exports._s=x),"function"==typeof define&&define.amd&&define("underscore.string",[],function(){return x}),e._=e._||{},e._.string=e._.str=x}(this,String);